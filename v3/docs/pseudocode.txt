Let's design a data structure

System prompt object
Name
Text

EXAMPLE
'''
You are a business researcher. Your task is to research software development companies to determine whether they fit certain criteria to determine if the owner is likely to want to sell the company.

You have the following tools at your disposal:

Perplexity Web Search
Perplexity is your general-purpose web search tool. 
<<perplexity_search: search terms>>

FireCrawl Text Scrape
FireCrawl allows you to scrape the full text of a web page
<<firecrawl_text_scrape: www.google.com>>

FireCrawl Link Scrape
The link scrape tool gives you a list of all the links on a page
<<firecrawl_link_scrape: www.gametrailers.com>>

PhantomBuster
This tool lets you view private LinkedIn information
<<phantombuster: www.linkedin.com/apple>>

Each tool use has a cost. 
Perplexity search costs $.01. Firecrawl text scrape and link scrape cost $.05. PhantomBuster costs $.10.
Your goal is to complete your research while minimizing costs. You should therefore primarily use perplexity_web_search, and only use the others when necessary.

The company you are researching is {company}.

You should respond in one of three ways. With a tool use request if you need more information, with a positive answer to the criterion, or a negative answer to the criterion. Indicate the response type in the first line of your response, like this "TYPE: tool_use", "TYPE: positive result", "TYPE: negative result"
The second line is the answer itself, eg, "Yes", "No", "47", "San Francisco, California", etc
The third line is the start of your analysis and explanation of your decision.

Here are some examples

EXAMPLE #1
Criterion: The company is a software publisher

RESPONSE
TYPE: tool_use
perplexity_search: does apple inc primarily publish software products for sale?
description: I need to figure out if apple publishes software. I'll do a perplexity search.

EXAMPLE #2
Criterion: The company is a software publisher
TYPE: negative result
answer: No
description: Although Apple does publish and sell software, their main business is selling hardware in the form of the iPhone and MacBook and iMac computers.

'''

Criterion object
Name: string
Text: string
Answer format: yes/no, number, string

EXAMPLE
Name="Software Publisher"
'''
Your task is to determine whether the company publishes software. You will primarily learn this from the company's website.

You know the following about the company:
'''



Context object


print("SmartBroker v0.7")
companies = getCompaniesFromJSON(companiesRange, "company_info.json")
companiesRangeTuple = getRangeFromUI()
autoResearch = getAutoResearchFromUI()
startCriterion = getCriterionFromUI()
companiesIterator = companiesRangeTuple[0]
criterionIterator = startCriterion
input("press start to begin")
loadSystemPrompt()
sendSystemPrompt()
context = {}
while(true):
	for criterionIterator in criteria:
		for companiesIterator in companies:
			investigate(companies[companiesIterator], criterion[criterionIterator])
			companiesIterator++
		criterionIterator++


def investigate(company, criterion):
	finished = False
	prompt = ""
	companyInformation = getEverythingWeKnowAboutThisCompany(company)
	companyInformation = companyInformation.toParagraph()
	perplexity_results = perplexitySearch(criterion["first search"])
	prompt += systemPrompt
	prompt += criterion["text"]
	prompt += companyInformation
	prompt += perplexity_results
	while(not finished):
		claude_response = parseResponse(sendToClaude(prompt))
		switch(claude_response["type"]):
			"perplexity":
				prompt += perplexity_search(claude_response["text"])
			"firecrawl_text":
				prompt += firecrawl_text(claude_response["text"])
			"firecrawl_links":
				prompt += firecrawl_links(claude_response["text"])
			"phantombuster":
				prompt += phantombuster(claude_response["text"])
			"disqualified":
				//remove company from companies
				company.disqualified = claude_response["text"]
				finished = True
			"qualified":
				//add the true fact we learned to the company object
				company.facts += claude_response["text"]
				//store the fact that we passed this criterion as a bool
				company[criterion] = True
				//end the investigation
				finished = True


def parseResponse(response):
	text = response[0]["content"]
	return {"type":text.firstLine, "text":text.remaining}

should we perform the first search without Claude?
Sure why not.